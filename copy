jQuery(document).ready(function($) {
    // Знайти select2 елемент
    let postSelector = $('#elementor-control-post_selector select');

    if (postSelector.length > 0) {
        postSelector.select2({
            ajax: {
                url: ajaxurl,
                dataType: 'json',
                method: 'POST',
                delay: 250,
                data: function (params) {
                    return {
                        action: 'my_custom_widget_get_posts',
                        nonce: my_custom_widget.nonce,
                        search: params.term, // Пошуковий термін
                    };
                },
                processResults: function (data) {
                    return {
                        results: data.data
                    };
                },
                cache: true
            },
            placeholder: 'Select a post',
            minimumInputLength: 1,
        });
    }
});